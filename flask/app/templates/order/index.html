{% extends "layout.html" %}
{% block content %}
{% include "navbar.html" %}
<div class="container max-w-6xl mx-auto mt-5">
    <div class="mt-3">
    <p class="font-bold text-lg">受注データ</p>
    <div class="my-5">
        <a href="/order_data/range" class="text-blue-500 hover:underline">日付範囲へ</a>
    </div>
        <div class="flex items-center mt-7">
            <form action="/order_data" method="GET">
                <label for="date_selected" class="text-sm">受注登録日</label>
                <input class="border ml-5" type="date" min="2020-09-01" name="date_selected" id="date_selected" required>
                <button type="submit" class="ml-5 bg-blue-600 text-white text-sm py-1 px-3 rounded shadow-lg
                hover:bg-blue-800 transition duration-200">表示</button>
            </form>
        </div>
        {#
        <div class="my-5">
            <p class="text-sm">受注日 <span class="text-xl">{{ date_selected }}</span></p>
            <table class="table-auto w-full mt-3">
                <thead>
                <tr class="border-t border-b">
                    <th class="py-2 text-center">箱数</th>
                    <th class="py-2 text-center">FUROSHIKI売上</th>
                    <th class="py-2 text-center">送料売上</th>
                    <th class="py-2 text-center">売上合計</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="text-center">{{ sum_qty }}</td>
                    <td class="text-center">{{ '{:,}'.format(sum_furoshiki_amount) }}</td>
                    <td class="text-center">{{ '{:,}'.format(sum_delivery_amount) }}</td>
                    <td class="text-center">{{ '{:,}'.format(sum_total_amount) }}</td>
                </tr>
                </tbody>
            </table>

            <div class="flex mt-7 mb-3 text-blue-500">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                </svg>
                    <a href="/data_view?dl=csv&date_selected={{ date_selected }}" class="hover:underline">
                    <p class="ml-3">csvダウンロード</p>
                    </a>
                </div>

            <table class="table-auto w-full">
                <thead>
                <tr class="border-t border-b">
                    <th class="py-2">受注番号</th>
                    <th class="py-2">受注日</th>
                    <th class="py-2">担当</th>
                    <th class="py-2">事業所</th>
                    <th class="py-2">都道府県</th>
                    <th class="py-2">商品</th>
                    <th class="py-2">単価</th>
                    <th class="py-2">数量</th>
                </tr>
                </thead>
                {% for order in orders %}
                <tr>
                    <td>{{ '{:06d}'.format(order.id) }}</td>
                    <td>{{ order.date.strftime('%m-%d %H:%M') }}</td>
                    <td>{{ order.user_orders.last_name }}</td>
                    <td>{{ order.customer_id }}-{{ order.shop_id }} {{ order.shop_orders.name }}</td>
                    <td>{{ order.shop_orders.prefecture }}</td>
                    <td>{{ order.product_orders.name }}</td>
                    <td class="text-right">{{ '{:,d}'.format(order.price) }}</td>
                    <td class="text-right">{{ order.qty }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
<!-- -->
        
        <div class="mx-auto mt-4">
            <!-- Tabs -->
            <ul id="tabs" class="inline-flex w-full px-1 pt-2 ">
                <li class="mx-5 px-4 py-2 -mb-px text-gray-800 border-b-2 border-blue-400"><a id="default-tab" href="#first">日単位</a></li>
                <li class="mx-5 px-4 py-2 text-gray-800"><a href="#second">日付範囲</a></li>
            </ul>

            <!-- Tab Contents -->
            <div id="tab-contents" class="bg-gray-100">
                <div id="first" class="p-4">
                    First tab
                </div>
                <div id="second" class="hidden p-4">
                    Second tab
                </div>
            </div>
        </div>

                <script>
                    let tabsContainer = document.querySelector("#tabs");

let tabTogglers = tabsContainer.querySelectorAll("a");
console.log(tabTogglers);

tabTogglers.forEach(function(toggler) {
  toggler.addEventListener("click", function(e) {
    e.preventDefault();

    let tabName = this.getAttribute("href");

    let tabContents = document.querySelector("#tab-contents");

    for (let i = 0; i < tabContents.children.length; i++) {

      tabTogglers[i].parentElement.classList.remove("border-blue-400", "border-b",  "-mb-px", "opacity-100");  tabContents.children[i].classList.remove("hidden");
      if ("#" + tabContents.children[i].id === tabName) {
        continue;
      }
      tabContents.children[i].classList.add("hidden");

    }
    e.target.parentElement.classList.add("border-blue-400", "border-b-4", "-mb-px", "opacity-100");
  });
});

document.getElementById("default-tab").click();

                </script>
        <!-- -->
        #}
    </div>
</div>
{% endblock %}
